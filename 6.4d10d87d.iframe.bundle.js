(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"./packages/q3-ui-emaileditor/src/components/CodeEditor/CodeEditor.jsx":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__("./node_modules/react/index.js"));var _core=__webpack_require__("./node_modules/@material-ui/core/esm/index.js"),_CodeEditorPreview=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/index.js")),_CodeEditorRevert=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorRevert/index.js")),_CodeEditorSave=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorSave/index.js")),_useCodeMirror2=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/useCodeMirror/index.js")),_styles=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditor/styles.js")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Emails=function Emails(_ref){_ref.children;var _useCodeMirror=(0,_useCodeMirror2.default)(),codeMirrorRef=_useCodeMirror.codeMirrorRef,disablePreview=_useCodeMirror.disablePreview,loading=_useCodeMirror.loading,html=_useCodeMirror.html,ref=_useCodeMirror.ref,revert=_useCodeMirror.revert,save=_useCodeMirror.save,value=_useCodeMirror.value,cls=(0,_styles.default)();return(0,_jsxRuntime.jsxs)(_core.Grid,{className:cls.root,container:!0,children:[(0,_jsxRuntime.jsxs)(_core.Grid,{item:!0,zeroMinWidth:!0,className:cls.column,children:[(0,_jsxRuntime.jsx)("textarea",{className:cls.textarea,"data-test":codeMirrorRef.current,"data-value":value,ref:ref}),(0,_jsxRuntime.jsx)(_CodeEditorRevert.default,{onClick:revert}),(0,_jsxRuntime.jsx)(_CodeEditorSave.default,{onClick:save})]}),(0,_jsxRuntime.jsx)(_CodeEditorPreview.default,{disable:disablePreview,html:html,loading:loading})]})};Emails.displayName="Emails";var _default=Emails;exports.default=_default,Emails.__docgenInfo={description:"",methods:[],displayName:"Emails"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages\\q3-ui-emaileditor\\src\\components\\CodeEditor\\CodeEditor.jsx"]={name:"Emails",docgenInfo:Emails.__docgenInfo,path:"packages\\q3-ui-emaileditor\\src\\components\\CodeEditor\\CodeEditor.jsx"})},"./packages/q3-ui-emaileditor/src/components/CodeEditor/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _CodeEditor.default}});var _CodeEditor=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditor/CodeEditor.jsx"))},"./packages/q3-ui-emaileditor/src/components/CodeEditor/styles.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=(0,__webpack_require__("./node_modules/@material-ui/core/esm/styles/index.js").makeStyles)((function(theme){var _CodeMirror,_root,_column;return{textarea:{display:"none"},root:(_root={height:"100%",width:"100%",flexWrap:"nowrap"},_root[theme.breakpoints.down("md")]={flexWrap:"wrap"},_root["& .CodeMirror"]=(_CodeMirror={padding:"1rem 0",height:"100% !important",width:"100% !important",maxHeight:"80vh"},_CodeMirror[theme.breakpoints.down("sm")]={maxHeight:"none !important"},_CodeMirror),_root),column:(_column={flex:1},_column[theme.breakpoints.down("sm")]={maxWidth:"100%",minWidth:"initial"},_column)}}));exports.default=_default},"./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/CodeEditorPreview.jsx":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_core=__webpack_require__("./node_modules/@material-ui/core/esm/index.js"),_src=__webpack_require__("./packages/q3-ui-helpers/src/index.js"),_styles=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/styles.js")),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CodeEditorPreview=function CodeEditorPreview(_ref){var disable=_ref.disable,loading=_ref.loading,html=_ref.html,ref=_react.default.useRef(),cls=(0,_styles.default)({loading:loading});return _react.default.useEffect((function(){if(ref.current&&html&&_src.browser.isBrowserReady()){var doc=ref.current.contentWindow.document;doc.open(),doc.write(html),doc.close()}}),[html]),disable?null:(0,_jsxRuntime.jsx)(_core.Grid,{item:!0,md:6,xs:12,className:cls.root,children:(0,_jsxRuntime.jsx)("iframe",{ref:ref,title:"preview",className:cls.iframe,"data-test":html})})};CodeEditorPreview.defaultProps={disable:!1,loading:!1,html:void 0},CodeEditorPreview.propTypes={disable:_propTypes.default.bool,loading:_propTypes.default.bool,html:_propTypes.default.string};var _default=CodeEditorPreview;exports.default=_default,CodeEditorPreview.__docgenInfo={description:"",methods:[],displayName:"CodeEditorPreview",props:{disable:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},loading:{defaultValue:{value:"false",computed:!1},type:{name:"bool"},required:!1,description:""},html:{defaultValue:{value:"undefined",computed:!0},type:{name:"string"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages\\q3-ui-emaileditor\\src\\components\\CodeEditorPreview\\CodeEditorPreview.jsx"]={name:"CodeEditorPreview",docgenInfo:CodeEditorPreview.__docgenInfo,path:"packages\\q3-ui-emaileditor\\src\\components\\CodeEditorPreview\\CodeEditorPreview.jsx"})},"./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _CodeEditorPreview.default}});var _CodeEditorPreview=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/CodeEditorPreview.jsx"))},"./packages/q3-ui-emaileditor/src/components/CodeEditorPreview/styles.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default=(0,__webpack_require__("./node_modules/@material-ui/core/esm/styles/index.js").makeStyles)((function(theme){var _root;return{root:(_root={backgroundColor:theme.palette.background.paper,height:"100%"},_root[theme.breakpoints.down("sm")]={display:"none"},_root),iframe:function iframe(_ref){return{border:0,width:"100%",height:"100%",filter:_ref.loading?"blur(2px)":void 0,transition:"filter 200ms",margin:0,padding:0}}}}));exports.default=_default},"./packages/q3-ui-emaileditor/src/components/CodeEditorRevert/CodeEditorRevert.jsx":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__("./node_modules/react/index.js"));var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_core=__webpack_require__("./node_modules/@material-ui/core/esm/index.js"),_History=_interopRequireDefault(__webpack_require__("./node_modules/@material-ui/icons/History.js")),_Tooltip=_interopRequireDefault(__webpack_require__("./node_modules/@material-ui/core/esm/Tooltip/index.js")),_src=__webpack_require__("./packages/q3-ui-permissions/src/index.jsx"),_src2=__webpack_require__("./packages/q3-ui-locale/src/index.jsx"),_useEmailTemplates=__webpack_require__("./packages/q3-ui-emaileditor/src/components/useEmailTemplates/useEmailTemplates.js"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CodeEditorRevert=function CodeEditorRevert(_ref){var onClick=_ref.onClick,Hide=(0,_src.useAuth)(_useEmailTemplates.URL_NAME).Hide,t=(0,_src2.useTranslation)("labels").t;return(0,_jsxRuntime.jsx)(Hide,{op:"Delete",children:(0,_jsxRuntime.jsx)(_core.Box,{position:"fixed",bottom:"1rem",right:"4.75rem",zIndex:"100",children:(0,_jsxRuntime.jsx)(_Tooltip.default,{title:t("revert"),children:(0,_jsxRuntime.jsx)(_core.Fab,{id:"revert-email-template",color:"secondary",onClick:onClick,children:(0,_jsxRuntime.jsx)(_History.default,{})})})})})};CodeEditorRevert.displayName="CodeEditorRevert",CodeEditorRevert.propTypes={onClick:_propTypes.default.func.isRequired};var _default=CodeEditorRevert;exports.default=_default,CodeEditorRevert.__docgenInfo={description:"",methods:[],displayName:"CodeEditorRevert",props:{onClick:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages\\q3-ui-emaileditor\\src\\components\\CodeEditorRevert\\CodeEditorRevert.jsx"]={name:"CodeEditorRevert",docgenInfo:CodeEditorRevert.__docgenInfo,path:"packages\\q3-ui-emaileditor\\src\\components\\CodeEditorRevert\\CodeEditorRevert.jsx"})},"./packages/q3-ui-emaileditor/src/components/CodeEditorRevert/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _CodeEditorRevert.default}});var _CodeEditorRevert=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorRevert/CodeEditorRevert.jsx"))},"./packages/q3-ui-emaileditor/src/components/CodeEditorSave/CodeEditorSave.jsx":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(__webpack_require__("./node_modules/react/index.js"));var _propTypes=_interopRequireDefault(__webpack_require__("./node_modules/prop-types/index.js")),_core=__webpack_require__("./node_modules/@material-ui/core/esm/index.js"),_Save=_interopRequireDefault(__webpack_require__("./node_modules/@material-ui/icons/Save.js")),_Tooltip=_interopRequireDefault(__webpack_require__("./node_modules/@material-ui/core/esm/Tooltip/index.js")),_src=__webpack_require__("./packages/q3-ui-permissions/src/index.jsx"),_src2=__webpack_require__("./packages/q3-ui-locale/src/index.jsx"),_useEmailTemplates=__webpack_require__("./packages/q3-ui-emaileditor/src/components/useEmailTemplates/useEmailTemplates.js"),_jsxRuntime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CodeEditorSave=function CodeEditorSave(_ref){var onClick=_ref.onClick,Hide=(0,_src.useAuth)(_useEmailTemplates.URL_NAME).Hide,t=(0,_src2.useTranslation)("labels").t;return(0,_jsxRuntime.jsx)(Hide,{op:"Update",children:(0,_jsxRuntime.jsx)(_core.Box,{position:"fixed",bottom:"1rem",right:"1rem",zIndex:"100",children:(0,_jsxRuntime.jsx)(_Tooltip.default,{title:t("save"),children:(0,_jsxRuntime.jsx)(_core.Fab,{id:"save-email-template",color:"secondary",onClick:onClick,children:(0,_jsxRuntime.jsx)(_Save.default,{})})})})})};CodeEditorSave.displayName="CodeEditorSave",CodeEditorSave.propTypes={onClick:_propTypes.default.func.isRequired};var _default=CodeEditorSave;exports.default=_default,CodeEditorSave.__docgenInfo={description:"",methods:[],displayName:"CodeEditorSave",props:{onClick:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages\\q3-ui-emaileditor\\src\\components\\CodeEditorSave\\CodeEditorSave.jsx"]={name:"CodeEditorSave",docgenInfo:CodeEditorSave.__docgenInfo,path:"packages\\q3-ui-emaileditor\\src\\components\\CodeEditorSave\\CodeEditorSave.jsx"})},"./packages/q3-ui-emaileditor/src/components/CodeEditorSave/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _CodeEditorSave.default}});var _CodeEditorSave=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/CodeEditorSave/CodeEditorSave.jsx"))},"./packages/q3-ui-emaileditor/src/components/useCodeMirror/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _useCodeMirror.default}});var _useCodeMirror=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/useCodeMirror/useCodeMirror.js"))},"./packages/q3-ui-emaileditor/src/components/useCodeMirror/useCodeMirror.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js"),__webpack_require__("./node_modules/codemirror/lib/codemirror.css"),__webpack_require__("./node_modules/codemirror/theme/base16-dark.css"),__webpack_require__("./node_modules/codemirror/theme/base16-light.css");var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_jsBeautify=_interopRequireDefault(__webpack_require__("./node_modules/js-beautify/js/index.js")),_codemirror2=_interopRequireDefault(__webpack_require__("./node_modules/codemirror/lib/codemirror.js")),_core=__webpack_require__("./node_modules/@material-ui/core/esm/index.js");__webpack_require__("./node_modules/codemirror/addon/selection/active-line.js"),__webpack_require__("./node_modules/codemirror/addon/edit/closetag.js"),__webpack_require__("./node_modules/codemirror/addon/edit/matchtags.js"),__webpack_require__("./node_modules/codemirror/addon/fold/foldcode.js"),__webpack_require__("./node_modules/codemirror/addon/fold/foldgutter.js"),__webpack_require__("./node_modules/codemirror/addon/search/match-highlighter.js"),__webpack_require__("./node_modules/codemirror/addon/search/search.js"),__webpack_require__("./node_modules/codemirror/addon/search/searchcursor.js"),__webpack_require__("./node_modules/codemirror/addon/search/jump-to-line.js"),__webpack_require__("./node_modules/codemirror/addon/dialog/dialog.js"),__webpack_require__("./node_modules/codemirror/addon/scroll/annotatescrollbar.js"),__webpack_require__("./node_modules/codemirror/addon/search/matchesonscrollbar.js"),__webpack_require__("./node_modules/codemirror/addon/hint/show-hint.js"),__webpack_require__("./node_modules/codemirror/addon/hint/xml-hint.js"),__webpack_require__("./node_modules/codemirror/mode/xml/xml.js"),__webpack_require__("./node_modules/codemirror/addon/lint/lint.js");var _EmailEditorContext=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/EmailEditorContext/index.js")),_usePreview2=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/usePreview/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _default=function useCodeMirror(){var _useTheme,_useTheme$palette,_React$useContext=_react.default.useContext(_EmailEditorContext.default),disablePreview=_React$useContext.disablePreview,onRevert=_React$useContext.onRevert,onSave=_React$useContext.onSave,value=_React$useContext.value,variables=_React$useContext.variables,cm=_react.default.useRef(),ref=_react.default.useRef(),mode=null===(_useTheme=(0,_core.useTheme)())||void 0===_useTheme||null===(_useTheme$palette=_useTheme.palette)||void 0===_useTheme$palette?void 0:_useTheme$palette.type,_React$useState2=_slicedToArray(_react.default.useState(!1),2),loading=_React$useState2[0],setLoading=_React$useState2[1],_usePreview=(0,_usePreview2.default)(),html=_usePreview.html,render=_usePreview.render,getMjml=function getMjml(){return null!=cm&&cm.current?cm.current.getValue():null},change=(0,_core.debounce)((function(){render(getMjml()).then((function(){setLoading(!1)}))}),1500),save=(0,_core.debounce)((function(){onSave(getMjml())}),250);return _react.default.useLayoutEffect((function(){if(ref.current)return cm.current=_codemirror2.default.fromTextArea(ref.current,{autoCloseTags:!0,lineNumbers:!0,mode:"xml",theme:"base16-"+mode}),cm.current.on("change",(function(){setLoading(!0),change()})),function(){cm.current&&(cm.current.toTextArea(),cm.current=null)}}),[disablePreview,mode,variables]),_react.default.useEffect((function(){cm.current&&value&&cm.current.setValue(_jsBeautify.default.html(value,{indent_size:2,wrap_attributes_indent_size:2,max_preserve_newline:0,preserve_newlines:!1}))}),[value]),{codeMirrorRef:cm,disablePreview:disablePreview,revert:onRevert,save:save,loading:loading,html:html,ref:ref,value:value}};exports.default=_default},"./packages/q3-ui-emaileditor/src/components/usePreview/index.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:function get(){return _usePreview.default}});var _usePreview=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__("./packages/q3-ui-emaileditor/src/components/usePreview/usePreview.js"))},"./packages/q3-ui-emaileditor/src/components/usePreview/usePreview.js":function(module,exports,__webpack_require__){"use strict";__webpack_require__("./node_modules/core-js/modules/es.symbol.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("./node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("./node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("./node_modules/core-js/modules/es.function.name.js"),__webpack_require__("./node_modules/core-js/modules/es.array.from.js"),__webpack_require__("./node_modules/core-js/modules/es.object.define-property.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__("./node_modules/core-js/modules/es.promise.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/es.array.is-array.js");var _react=_interopRequireDefault(__webpack_require__("./node_modules/react/index.js")),_axios=_interopRequireDefault(__webpack_require__("./node_modules/axios/index.js")),_useMediaQuery=_interopRequireDefault(__webpack_require__("./node_modules/@material-ui/core/esm/useMediaQuery/index.js")),_EmailEditorContext=_interopRequireDefault(__webpack_require__("./packages/q3-ui-emaileditor/src/components/EmailEditorContext/index.js"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _default=function usePreview(){var isMobile=(0,_useMediaQuery.default)((function(theme){return theme.breakpoints.down("sm")}))||!1,_React$useState2=_slicedToArray(_react.default.useState(),2),html=_React$useState2[0],setHtml=_React$useState2[1],_React$useContext=_react.default.useContext(_EmailEditorContext.default),disablePreview=_React$useContext.disablePreview,variables=_React$useContext.variables,clear=function clear(){return setHtml(null)},getData=function getData(_ref){var data=_ref.data;setHtml(null==data?void 0:data.html)};return{render:function render(mjml){return!mjml||disablePreview||isMobile?Promise.resolve(clear()):_axios.default.post("emails-preview",{mjml:mjml,variables:variables}).then(getData).catch(clear)},html:html}};exports.default=_default}}]);